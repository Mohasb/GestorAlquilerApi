






        private async void RemoveCarFromAvailable(Reservation reservation)
        {
             var planning = _repository.GetReservationData(reservation);
             
            foreach (var day in planning)
            {
                day.CarsAvailables--;
            }
            await _saveData.SaveChangesAsync(); 
        }

        



        public bool CheckAvailabilityCars(Reservation reservation)
        {
            //get data of reservation
            var data =
                from p in _context.Planning
                where
                    p.BranchId == reservation.BranchId
                    && p.CarCategory == reservation.CarCategory
                    && p.Day >= reservation.StartDate.Date
                    && p.Day <= reservation.EndDate.Date
                select p;
            var count = data.Count();
            //If are cars availables in all the days...
            
            bool all = data.All(p => p.CarsAvailables > 0);
            return all;
        }
        public IQueryable<Planning> GetReservationData(Reservation reservation)
        {
            var data = from p in _context.Planning
                where
                    p.BranchId == reservation.BranchId
                    && p.CarCategory == reservation.CarCategory
                    && p.Day >= reservation.StartDate.Date
                    && p.Day <= reservation.EndDate.Date
                select p;
                return data;
        }